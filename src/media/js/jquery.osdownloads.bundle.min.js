// jQuery Browser
!function(e){var r,o=navigator.userAgent||"";e.uaMatch=function(e){e=e.toLowerCase();var r=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(e)||[];return{browser:r[1]||"",version:r[2]||"0"}},r=e.uaMatch(o),e.browser={},r.browser&&(e.browser[r.browser]=!0,e.browser.version=r.version),e.browser.webkit&&(e.browser.safari=!0)}(jQuery);

// jQuery Auto-Height
!function(e){e.fn.iframeAutoHeight=function(t){function i(e){h.debug&&h.debug===!0&&window.console&&console.log(e)}function n(t,n){i("Diagnostics from '"+n+"'");try{i("  "+e(t,window.top.document).contents().find("body")[0].scrollHeight+" for ...find('body')[0].scrollHeight"),i("  "+e(t.contentWindow.document).height()+" for ...contentWindow.document).height()"),i("  "+e(t.contentWindow.document.body).height()+" for ...contentWindow.document.body).height()")}catch(o){i("  unable to check in this state")}i("End diagnostics -> results vary by browser and when diagnostics are requested")}var o;if(e.browser===o){var r=[];return r.push("WARNING: you appear to be using a newer version of jquery which does not support the $.browser variable."),r.push("The jQuery iframe auto height plugin relies heavly on the $.browser features."),r.push("Install jquery-browser: https://raw.github.com/house9/jquery-iframe-auto-height/master/release/jquery.browser.js"),alert(r.join("\n")),e}var h=e.extend({heightOffset:0,minHeight:0,maxHeight:0,callback:function(){},animate:!1,debug:!1,diagnostics:!1,resetToMinHeight:!1,triggerFunctions:[],heightCalculationOverrides:[]},t);return i(h),this.each(function(){function t(e){var t=null;return jQuery.each(r,function(i,n){return e[n]?(t=s[n],!1):void 0}),null===t&&(t=s["default"]),t}function o(o){h.diagnostics&&n(o,"resizeHeight"),h.resetToMinHeight&&h.resetToMinHeight===!0&&(o.style.height=h.minHeight+"px");var r=e(o,window.top.document).contents().find("body"),s=t(e.browser),a=s(o,r,h,e.browser);i(a),a<h.minHeight&&(i("new height is less than minHeight"),a=h.minHeight),h.maxHeight>0&&a>h.maxHeight&&(i("new height is greater than maxHeight"),a=h.maxHeight),a+=h.heightOffset,i("New Height: "+a),h.animate?e(o).animate({height:a+"px"},{duration:500}):o.style.height=a+"px",h.callback.apply(e(o),[{newFrameHeight:a}])}var r=["webkit","mozilla","msie","opera"],s={};s["default"]=function(e,t,i){return t[0].scrollHeight+i.heightOffset},jQuery.each(r,function(e,t){s[t]=s["default"]}),jQuery.each(h.heightCalculationOverrides,function(e,t){s[t.browser]=t.calculation});var a=0;if(null===this.contentDocument&&null===this.contentWindow)return!1;var u=this.contentDocument||this.contentWindow.document;if(i(this),h.diagnostics&&n(this,"each iframe"),h.triggerFunctions.length>0){i(h.triggerFunctions.length+" trigger Functions");for(var c=0;c<h.triggerFunctions.length;c++)h.triggerFunctions[c](o,this)}if(e.browser.webkit||e.browser.opera||e.browser.chrome){i("browser is webkit or opera"),e(this).load(function(){var e=0,t=this,n=function(){o(t)};0===a?e=500:t.style.height=h.minHeight+"px",i("load delay: "+e),setTimeout(n,e),a++});var g=e(this).attr("src");e(this).attr("src",""),e(this).attr("src",g)}else"complete"===u.readyState?o(this):e(this).load(function(){o(this)})})}}(jQuery);

// jQuery Reveal
!function(a){a("a[data-reveal-id]").on("click",function(b){b.preventDefault();var c=a(this).attr("data-reveal-id");a("#"+c).reveal(a(this).data())}),a.fn.reveal=function(b){var c={animation:"fadeAndPop",animationSpeed:300,closeOnBackgroundClick:!0,dismissModalClass:"close-reveal-modal"},b=a.extend({},c,b);return this.each(function(){function h(){g.unbind("click.modalEvent"),a("."+b.dismissModalClass).unbind("click.modalEvent"),f||(l(),"fadeAndPop"==b.animation&&(c.css({top:a(document).scrollTop()-e,opacity:0,visibility:"visible"}),g.fadeIn(b.animationSpeed/2),c.delay(b.animationSpeed/2).animate({top:a(document).scrollTop()+d+"px",opacity:1},b.animationSpeed,k)),"fade"==b.animation&&(c.css({opacity:0,visibility:"visible",top:a(document).scrollTop()+d}),g.fadeIn(b.animationSpeed/2),c.delay(b.animationSpeed/2).animate({opacity:1},b.animationSpeed,k)),"none"==b.animation&&(c.css({visibility:"visible",top:a(document).scrollTop()+d}),g.css({display:"block"}),k())),c.unbind("reveal:open",h)}function i(){f||(l(),"fadeAndPop"==b.animation&&(g.delay(b.animationSpeed).fadeOut(b.animationSpeed),c.animate({top:a(document).scrollTop()-e+"px",opacity:0},b.animationSpeed/2,function(){c.css({top:d,opacity:1,visibility:"hidden"}),k()})),"fade"==b.animation&&(g.delay(b.animationSpeed).fadeOut(b.animationSpeed),c.animate({opacity:0},b.animationSpeed,function(){c.css({opacity:1,visibility:"hidden",top:d}),k()})),"none"==b.animation&&(c.css({visibility:"hidden",top:d}),g.css({display:"none"}))),c.unbind("reveal:close",i)}function k(){f=!1}function l(){f=!0}var c=a(this),d=parseInt(c.css("top")),e=c.height()+d,f=!1,g=a(".reveal-modal-bg");0==g.length&&(g=a('<div class="reveal-modal-bg" />').insertAfter(c),g.fadeTo("fast",.8)),c.bind("reveal:open",h),c.bind("reveal:close",i),c.trigger("reveal:open"),a("."+b.dismissModalClass).bind("click.modalEvent",function(){c.trigger("reveal:close")}),b.closeOnBackgroundClick&&(g.css({cursor:"pointer"}),g.bind("click.modalEvent",function(){c.trigger("reveal:close")})),a("body").keyup(function(a){27===a.which&&c.trigger("reveal:close")})})}}(jQuery);

// jQuery OSDownloads
!function(e){e(function(){e(".reveal-modal").appendTo(e("body"))}),e.fn.osdownloads=function(a){var r={animation:"fade",elementsPrefix:"osdownloads",popupElementId:"osdownloadsRequirementsPopup"},a=e.extend({},r,a);return this.length?this.each(function(){var r=e(this),i=e("#"+a.elementsPrefix+"DownloadContinue"),n=e("#"+a.popupElementId),t=e("#"+a.elementsPrefix+"ErrorAgreeTerms"),o=e("#"+a.elementsPrefix+"ErrorInvalidEmail"),l=e("#"+a.elementsPrefix+"RequireAgree"),s=e("#"+a.elementsPrefix+"RequireEmail"),d=e("#"+a.elementsPrefix+"EmailGroup"),m=e("#"+a.elementsPrefix+"AgreeGroup"),c=e("#"+a.elementsPrefix+"RequiredEmailMessage"),f=(r.data("direct-page"),1==r.data("show-email")),u=1==r.data("require-email"),h=1==r.data("require-agree"),p=function(){var e=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,a=!1;if(h&&(l.is(":checked")?t.hide():(a=!0,t.show())),u){var r=s.val().trim();""!==r&&e.test(r)?o.hide():(a=!0,o.show())}else if(f){var r=s.val().trim();""==r||e.test(r)?o.hide():(a=!0,o.show())}return a?!1:!0},v=function(r){e(r).reveal({animation:a.animation,animationspeed:200,closeonbackgroundclick:!0,dismissmodalclass:"close-reveal-modal"})},g=function(){var i=r.attr("href");s.length>0&&(i+="&email="+s.val().trim()),$container=e("<div>").attr("id",a.elementsPrefix+"PopupIframe").addClass("reveal-modal"),$iframe=e("<iframe>").attr("src",i),$iframe.iframeAutoHeight({heightOffset:10}),$close=e('<a class="close-reveal-modal">&#215;</a>'),$iframe.appendTo($container),$close.appendTo($container),$container.appendTo(e("body")),$container.on("reveal:close",function(){setTimeout(function(){$container.remove()},500)}),n.trigger("reveal:close"),setTimeout(function(){v("#"+a.elementsPrefix+"PopupIframe")},500)};r.on("click",function(t){t.preventDefault(),f||u||h?(f||u?(u?c.show():c.hide(),d.show()):d.hide(),h?(m.children("label").children("span").children("a").attr("href",r.data("agreement-article")),m.show()):m.hide(),i.attr("href",r.attr("href")),v("#"+a.popupElementId),n.on("reveal:close",function(){s.val(""),l.attr("checked",!1),e(".reveal-modal .error").hide()}),i.off(),i.on("click",function(e){e.preventDefault(),p()&&g()})):g()})}):void 0}}(jQuery);
