// jQuery Browser
!function(e){var r,o=navigator.userAgent||"";e.uaMatch=function(e){e=e.toLowerCase();var r=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(e)||[];return{browser:r[1]||"",version:r[2]||"0"}},r=e.uaMatch(o),e.browser={},r.browser&&(e.browser[r.browser]=!0,e.browser.version=r.version),e.browser.webkit&&(e.browser.safari=!0)}(jQuery);

// jQuery Auto-Height
!function(e){e.fn.iframeAutoHeight=function(t){function i(e){h.debug&&h.debug===!0&&window.console&&console.log(e)}function n(t,n){i("Diagnostics from '"+n+"'");try{i("  "+e(t,window.top.document).contents().find("body")[0].scrollHeight+" for ...find('body')[0].scrollHeight"),i("  "+e(t.contentWindow.document).height()+" for ...contentWindow.document).height()"),i("  "+e(t.contentWindow.document.body).height()+" for ...contentWindow.document.body).height()")}catch(o){i("  unable to check in this state")}i("End diagnostics -> results vary by browser and when diagnostics are requested")}var o;if(e.browser===o){var r=[];return r.push("WARNING: you appear to be using a newer version of jquery which does not support the $.browser variable."),r.push("The jQuery iframe auto height plugin relies heavly on the $.browser features."),r.push("Install jquery-browser: https://raw.github.com/house9/jquery-iframe-auto-height/master/release/jquery.browser.js"),alert(r.join("\n")),e}var h=e.extend({heightOffset:0,minHeight:0,maxHeight:0,callback:function(){},animate:!1,debug:!1,diagnostics:!1,resetToMinHeight:!1,triggerFunctions:[],heightCalculationOverrides:[]},t);return i(h),this.each(function(){function t(e){var t=null;return jQuery.each(r,function(i,n){return e[n]?(t=s[n],!1):void 0}),null===t&&(t=s["default"]),t}function o(o){h.diagnostics&&n(o,"resizeHeight"),h.resetToMinHeight&&h.resetToMinHeight===!0&&(o.style.height=h.minHeight+"px");var r=e(o,window.top.document).contents().find("body"),s=t(e.browser),a=s(o,r,h,e.browser);i(a),a<h.minHeight&&(i("new height is less than minHeight"),a=h.minHeight),h.maxHeight>0&&a>h.maxHeight&&(i("new height is greater than maxHeight"),a=h.maxHeight),a+=h.heightOffset,i("New Height: "+a),h.animate?e(o).animate({height:a+"px"},{duration:500}):o.style.height=a+"px",h.callback.apply(e(o),[{newFrameHeight:a}])}var r=["webkit","mozilla","msie","opera"],s={};s["default"]=function(e,t,i){return t[0].scrollHeight+i.heightOffset},jQuery.each(r,function(e,t){s[t]=s["default"]}),jQuery.each(h.heightCalculationOverrides,function(e,t){s[t.browser]=t.calculation});var a=0;if(null===this.contentDocument&&null===this.contentWindow)return!1;var u=this.contentDocument||this.contentWindow.document;if(i(this),h.diagnostics&&n(this,"each iframe"),h.triggerFunctions.length>0){i(h.triggerFunctions.length+" trigger Functions");for(var c=0;c<h.triggerFunctions.length;c++)h.triggerFunctions[c](o,this)}if(e.browser.webkit||e.browser.opera||e.browser.chrome){i("browser is webkit or opera"),e(this).load(function(){var e=0,t=this,n=function(){o(t)};0===a?e=500:t.style.height=h.minHeight+"px",i("load delay: "+e),setTimeout(n,e),a++});var g=e(this).attr("src");e(this).attr("src",""),e(this).attr("src",g)}else"complete"===u.readyState?o(this):e(this).load(function(){o(this)})})}}(jQuery);

// jQuery Reveal(function osdownloadsClosure(a){a(function b(){a(".osdownloads-modal").appendTo(a("body"))});a.fn.osdownloads=function c(d){var e={animation:"fade",elementsPrefix:"osdownloads",popupElementId:"osdownloadsRequirementsPopup"};var d=a.extend({},e,d);if(this.length){return this.each(function f(){var j=a(this),t=a("#"+d.elementsPrefix+"DownloadContinue"),p=a("#"+d.popupElementId),u=a("#"+d.elementsPrefix+"ErrorAgreeTerms"),l=a("#"+d.elementsPrefix+"ErrorInvalidEmail"),r=a("#"+d.elementsPrefix+"RequireAgree"),v=a("#"+d.elementsPrefix+"RequireEmail"),h=a("#"+d.elementsPrefix+"EmailGroup"),w=a("#"+d.elementsPrefix+"AgreeGroup"),o=a("#"+d.elementsPrefix+"RequiredEmailMessage"),x=j.data("direct-page"),s=j.data("require-email"),q=j.data("require-agree")==1;var k=function(){var B=/^([A-Za-z0-9_\-\.\+])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,25})$/,z=null,y=false;if(q){if(!r.is(":checked")){y=true;u.show()}else{u.hide()}}if(s==1){var A=v.val().trim();if(A===""||!B.test(A)){y=true;l.show()}else{l.hide()}}else{if(s==2){var A=v.val().trim();if(A!=""&&!B.test(A)){y=true;l.show()}else{l.hide()}}}if(y){return false}return true};var m=function(y){a(y).reveal({animation:d.animation,animationspeed:200,closeonbackgroundclick:true,dismissmodalclass:"close-reveal-modal",})};var n=function(){if(x){window.location=x}};var i=function(){var y=j.attr("href");if(v.length>0){y+="&email="+encodeURIComponent(v.val().trim())}if(r.length>0){y+="&agree="+(r.is(":checked")?1:0)}$container=a("<div>").attr("id",d.elementsPrefix+"PopupIframe").addClass("reveal-modal").addClass("osdownloads-modal");$iframe=a("<iframe>").attr("src",y);$iframe.iframeAutoHeight({heightOffset:10});$close=a('<a class="close-reveal-modal">&#215;</a>');$iframe.appendTo($container);$close.appendTo($container);$container.appendTo(a("body"));$container.on("reveal:close",function(){setTimeout(function A(){$container.remove()},500)});p.trigger("reveal:close");setTimeout(function z(){m("#"+d.elementsPrefix+"PopupIframe")},500)};j.on("click",function g(z){z.preventDefault();if(s||q){if(s!=0){if(s==1){o.show()}else{o.hide()}h.show()}else{h.hide()}if(q){w.find(".agreement-article").attr("href",j.data("agreement-article"));w.show()}else{w.hide()}t.attr("href",j.attr("href"));m("#"+d.popupElementId);p.on("reveal:close",function A(){v.val("");r.attr("checked",false);a(".osdownloads-modal .error").hide()});t.off();t.on("click",function y(B){B.preventDefault();if(k()){i()}})}else{i()}})})}}})(jQuery);
!function(a){a("a[data-reveal-id]").on("click",function(b){b.preventDefault();var c=a(this).attr("data-reveal-id");a("#"+c).reveal(a(this).data())}),a.fn.reveal=function(b){var c={animation:"fadeAndPop",animationSpeed:300,closeOnBackgroundClick:!0,dismissModalClass:"close-reveal-modal"},b=a.extend({},c,b);return this.each(function(){function h(){g.unbind("click.modalEvent"),a("."+b.dismissModalClass).unbind("click.modalEvent"),f||(l(),"fadeAndPop"==b.animation&&(c.css({top:a(document).scrollTop()-e,opacity:0,visibility:"visible"}),g.fadeIn(b.animationSpeed/2),c.delay(b.animationSpeed/2).animate({top:a(document).scrollTop()+d+"px",opacity:1},b.animationSpeed,k)),"fade"==b.animation&&(c.css({opacity:0,visibility:"visible",top:a(document).scrollTop()+d}),g.fadeIn(b.animationSpeed/2),c.delay(b.animationSpeed/2).animate({opacity:1},b.animationSpeed,k)),"none"==b.animation&&(c.css({visibility:"visible",top:a(document).scrollTop()+d}),g.css({display:"block"}),k())),c.unbind("reveal:open",h)}function i(){f||(l(),"fadeAndPop"==b.animation&&(g.delay(b.animationSpeed).fadeOut(b.animationSpeed),c.animate({top:a(document).scrollTop()-e+"px",opacity:0},b.animationSpeed/2,function(){c.css({top:d,opacity:1,visibility:"hidden"}),k()})),"fade"==b.animation&&(g.delay(b.animationSpeed).fadeOut(b.animationSpeed),c.animate({opacity:0},b.animationSpeed,function(){c.css({opacity:1,visibility:"hidden",top:d}),k()})),"none"==b.animation&&(c.css({visibility:"hidden",top:d}),g.css({display:"none"}))),c.unbind("reveal:close",i)}function k(){f=!1}function l(){f=!0}var c=a(this),d=parseInt(c.css("top")),e=c.height()+d,f=!1,g=a(".reveal-modal-bg");0==g.length&&(g=a('<div class="reveal-modal-bg" />').insertAfter(c),g.fadeTo("fast",.8)),c.bind("reveal:open",h),c.bind("reveal:close",i),c.trigger("reveal:open"),a("."+b.dismissModalClass).bind("click.modalEvent",function(){c.trigger("reveal:close")}),b.closeOnBackgroundClick&&(g.css({cursor:"pointer"}),g.bind("click.modalEvent",function(){c.trigger("reveal:close")})),a("body").keyup(function(a){27===a.which&&c.trigger("reveal:close")})})}}(jQuery);

// jQuery OSDownloads
(function osdownloadsClosure($){$(function osdownloadsDomReady(){$('.osdownloads-modal').appendTo($('body'));});$.fn.osdownloads=function osdownloads(options){var defaults={animation:'fade',elementsPrefix:'osdownloads',popupElementId:'osdownloadsRequirementsPopup'};var options=$.extend({},defaults,options);if(this.length){return this.each(function osdownloadsEachElement(){var $this=$(this),$btnContinue=$('#'+options.elementsPrefix+'DownloadContinue'),$popup=$('#'+options.popupElementId),$errorAgreeTerms=$('#'+options.elementsPrefix+'ErrorAgreeTerms'),$errorInvalidEmail=$('#'+options.elementsPrefix+'ErrorInvalidEmail'),$fieldAgree=$('#'+options.elementsPrefix+'RequireAgree'),$fieldEmail=$('#'+options.elementsPrefix+'RequireEmail'),$groupEmail=$('#'+options.elementsPrefix+'EmailGroup'),$groupAgree=$('#'+options.elementsPrefix+'AgreeGroup'),$requiredEmailMessage=$('#'+options.elementsPrefix+'RequiredEmailMessage'),directPage=$this.data('direct-page'),requireEmail=$this.data('require-email'),requireAgree=$this.data('require-agree')==1;if($this.data('configured')==='1'){return true;}
var isValidForm=function(){var emailRegex=/^([A-Za-z0-9_\-\.\+])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,25})$/,errorElement=null,hasError=false;if(requireAgree){if(!$fieldAgree.is(':checked')){hasError=true;$errorAgreeTerms.show();}else{$errorAgreeTerms.hide();}}
if(requireEmail==1){var email=$fieldEmail.val().trim();if(email===''||!emailRegex.test(email)){hasError=true;$errorInvalidEmail.show();}else{$errorInvalidEmail.hide();}}else{if(requireEmail==2){var email=$fieldEmail.val().trim();if(email!=''&&!emailRegex.test(email)){hasError=true;$errorInvalidEmail.show();}else{$errorInvalidEmail.hide();}}}
if(hasError){return false;}
return true;};var showPopup=function(selector){$(selector).reveal({animation:options.animation,animationspeed:200,closeonbackgroundclick:true,dismissmodalclass:'close-reveal-modal',});};var goToDirectPage=function(){if(directPage){window.location=directPage;}};var addQueryVarToUri=function(url,variable,value){if(url.indexOf('?')>-1){url+='&';}else{url+='?';}
url+=variable+'='+value;return url;};var download=function(){var url=$this.attr('href');if($fieldEmail.length>0){url=addQueryVarToUri(url,'email',encodeURIComponent($fieldEmail.val().trim()));}
if($fieldAgree.length>0){value=($fieldAgree.is(':checked')?1:0);url=addQueryVarToUri(url,'agree',value);}
$container=$('<div>').attr('id',options.elementsPrefix+'PopupIframe').addClass('reveal-modal').addClass('osdownloads-modal');$iframe=$('<iframe>').attr('src',url);$iframe.iframeAutoHeight({heightOffset:10});$close=$('<a class="close-reveal-modal">&#215;</a>');$iframe.appendTo($container);$close.appendTo($container);$container.appendTo($('body'));$container.on('reveal:close',function(){setTimeout(function timeoutRemoveIframePopup(){$container.remove();},500);});$popup.trigger('reveal:close');setTimeout(function timeoutShowPopup(){showPopup('#'+options.elementsPrefix+'PopupIframe');},500);};$this.on('click',function downloadBtnOnClick(event){event.preventDefault();if(requireEmail||requireAgree){if(requireEmail!=0){if(requireEmail==1){$requiredEmailMessage.show();}else{$requiredEmailMessage.hide();}
$groupEmail.show();}else{$groupEmail.hide();}
if(requireAgree){$groupAgree.find('.agreement-article').attr('href',$this.data('agreement-article'));$groupAgree.show();}else{$groupAgree.hide();}
$btnContinue.attr('href',$this.attr('href'));showPopup('#'+options.popupElementId);$popup.on('reveal:close',function requirementsRevealOnClose(){$fieldEmail.val('');$fieldAgree.attr('checked',false);$('.osdownloads-modal .error').hide();});$btnContinue.off();$btnContinue.on('click',function continueBtnOnClick(event){event.preventDefault();if(isValidForm()){download();}});}else{download();}});$this.data('configured',1);});}};})(jQuery);
