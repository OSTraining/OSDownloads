!function(a){a("a[data-reveal-id]").on("click",function(b){b.preventDefault();var c=a(this).attr("data-reveal-id");a("#"+c).reveal(a(this).data())}),a.fn.reveal=function(b){var c={animation:"fadeAndPop",animationSpeed:300,closeOnBackgroundClick:!0,dismissModalClass:"close-reveal-modal"},b=a.extend({},c,b);return this.each(function(){function h(){g.unbind("click.modalEvent"),a("."+b.dismissModalClass).unbind("click.modalEvent"),f||(l(),"fadeAndPop"==b.animation&&(c.css({top:a(document).scrollTop()-e,opacity:0,visibility:"visible"}),g.fadeIn(b.animationSpeed/2),c.delay(b.animationSpeed/2).animate({top:a(document).scrollTop()+d+"px",opacity:1},b.animationSpeed,k)),"fade"==b.animation&&(c.css({opacity:0,visibility:"visible",top:a(document).scrollTop()+d}),g.fadeIn(b.animationSpeed/2),c.delay(b.animationSpeed/2).animate({opacity:1},b.animationSpeed,k)),"none"==b.animation&&(c.css({visibility:"visible",top:a(document).scrollTop()+d}),g.css({display:"block"}),k())),c.unbind("reveal:open",h)}function i(){f||(l(),"fadeAndPop"==b.animation&&(g.delay(b.animationSpeed).fadeOut(b.animationSpeed),c.animate({top:a(document).scrollTop()-e+"px",opacity:0},b.animationSpeed/2,function(){c.css({top:d,opacity:1,visibility:"hidden"}),k()})),"fade"==b.animation&&(g.delay(b.animationSpeed).fadeOut(b.animationSpeed),c.animate({opacity:0},b.animationSpeed,function(){c.css({opacity:1,visibility:"hidden",top:d}),k()})),"none"==b.animation&&(c.css({visibility:"hidden",top:d}),g.css({display:"none"}))),c.unbind("reveal:close",i)}function k(){f=!1}function l(){f=!0}var c=a(this),d=parseInt(c.css("top")),e=c.height()+d,f=!1,g=a(".reveal-modal-bg");0==g.length&&(g=a('<div class="reveal-modal-bg" />').insertAfter(c),g.fadeTo("fast",.8)),c.bind("reveal:open",h),c.bind("reveal:close",i),c.trigger("reveal:open"),a("."+b.dismissModalClass).bind("click.modalEvent",function(){c.trigger("reveal:close")}),b.closeOnBackgroundClick&&(g.css({cursor:"pointer"}),g.bind("click.modalEvent",function(){c.trigger("reveal:close")})),a("body").keyup(function(a){27===a.which&&c.trigger("reveal:close")})})}}(jQuery);
