(function osdownloadsClosure(a){a(function b(){a(".osdownloads-modal").appendTo(a("body"))});a.fn.osdownloads=function c(d){var e={animation:"fade",elementsPrefix:"osdownloads",popupElementId:"osdownloadsRequirementsPopup"};var d=a.extend({},e,d);if(this.length){return this.each(function f(){var j=a(this),t=a("#"+d.elementsPrefix+"DownloadContinue"),p=a("#"+d.popupElementId),u=a("#"+d.elementsPrefix+"ErrorAgreeTerms"),l=a("#"+d.elementsPrefix+"ErrorInvalidEmail"),r=a("#"+d.elementsPrefix+"RequireAgree"),v=a("#"+d.elementsPrefix+"RequireEmail"),h=a("#"+d.elementsPrefix+"EmailGroup"),w=a("#"+d.elementsPrefix+"AgreeGroup"),o=a("#"+d.elementsPrefix+"RequiredEmailMessage"),x=j.data("direct-page"),s=j.data("require-email"),q=j.data("require-agree")==1;var k=function(){var B=/^([A-Za-z0-9_\-\.\+])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,25})$/,z=null,y=false;if(q){if(!r.is(":checked")){y=true;u.show()}else{u.hide()}}if(s==1){var A=v.val().trim();if(A===""||!B.test(A)){y=true;l.show()}else{l.hide()}}else{if(s==2){var A=v.val().trim();if(A!=""&&!B.test(A)){y=true;l.show()}else{l.hide()}}}if(y){return false}return true};var m=function(y){a(y).reveal({animation:d.animation,animationspeed:200,closeonbackgroundclick:true,dismissmodalclass:"close-reveal-modal",})};var n=function(){if(x){window.location=x}};var i=function(){var y=j.attr("href");if(v.length>0){y+="&email="+encodeURIComponent(v.val().trim())}if(r.length>0){y+="&agree="+(r.is(":checked")?1:0)}$container=a("<div>").attr("id",d.elementsPrefix+"PopupIframe").addClass("reveal-modal").addClass("osdownloads-modal");$iframe=a("<iframe>").attr("src",y);$iframe.iframeAutoHeight({heightOffset:10});$close=a('<a class="close-reveal-modal">&#215;</a>');$iframe.appendTo($container);$close.appendTo($container);$container.appendTo(a("body"));$container.on("reveal:close",function(){setTimeout(function A(){$container.remove()},500)});p.trigger("reveal:close");setTimeout(function z(){m("#"+d.elementsPrefix+"PopupIframe")},500)};j.on("click",function g(z){z.preventDefault();if(s||q){if(s!=0){if(s==1){o.show()}else{o.hide()}h.show()}else{h.hide()}if(q){w.find(".agreement-article").attr("href",j.data("agreement-article"));w.show()}else{w.hide()}t.attr("href",j.attr("href"));m("#"+d.popupElementId);p.on("reveal:close",function A(){v.val("");r.attr("checked",false);a(".osdownloads-modal .error").hide()});t.off();t.on("click",function y(B){B.preventDefault();if(k()){i()}})}else{i()}})})}}})(jQuery);