!function(a){a(function(){a(".osdownloads-modal").appendTo(a("body"))}),a.fn.osdownloads=function(b){var c={animation:"fade",elementsPrefix:"osdownloads",popupElementId:"osdownloadsRequirementsPopup"},b=a.extend({},c,b);return this.length?this.each(function(){var c=a(this),d=a("#"+b.elementsPrefix+"DownloadContinue"),e=a("#"+b.popupElementId),f=a("#"+b.elementsPrefix+"ErrorAgreeTerms"),g=a("#"+b.elementsPrefix+"ErrorInvalidEmail"),h=a("#"+b.elementsPrefix+"RequireAgree"),i=a("#"+b.elementsPrefix+"RequireEmail"),j=a("#"+b.elementsPrefix+"EmailGroup"),k=a("#"+b.elementsPrefix+"AgreeGroup"),l=a("#"+b.elementsPrefix+"RequiredEmailMessage"),n=(c.data("direct-page"),c.data("require-email")),o=1==c.data("require-agree");if("1"===c.data("configured"))return!0;var p=function(){var a=/^([A-Za-z0-9_\-\.\+])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,25})$/,c=!1;if(o&&(h.is(":checked")?f.hide():(c=!0,f.show())),1==n){var d=i.val().trim();""!==d&&a.test(d)?g.hide():(c=!0,g.show())}else if(2==n){var d=i.val().trim();""==d||a.test(d)?g.hide():(c=!0,g.show())}return c?!1:!0},q=function(c){a(c).reveal({animation:b.animation,animationspeed:200,closeonbackgroundclick:!0,dismissmodalclass:"close-reveal-modal"})},s=function(){var d=c.attr("href");i.length>0&&(d+="&email="+encodeURIComponent(i.val().trim())),h.length>0&&(d+="&agree="+(h.is(":checked")?1:0)),$container=a("<div>").attr("id",b.elementsPrefix+"PopupIframe").addClass("reveal-modal").addClass("osdownloads-modal"),$iframe=a("<iframe>").attr("src",d),$iframe.iframeAutoHeight({heightOffset:10}),$close=a('<a class="close-reveal-modal">&#215;</a>'),$iframe.appendTo($container),$close.appendTo($container),$container.appendTo(a("body")),$container.on("reveal:close",function(){setTimeout(function(){$container.remove()},500)}),e.trigger("reveal:close"),setTimeout(function(){q("#"+b.elementsPrefix+"PopupIframe")},500)};c.on("click",function(f){f.preventDefault(),n||o?(0!=n?(1==n?l.show():l.hide(),j.show()):j.hide(),o?(k.find(".agreement-article").attr("href",c.data("agreement-article")),k.show()):k.hide(),d.attr("href",c.attr("href")),q("#"+b.popupElementId),e.on("reveal:close",function(){i.val(""),h.attr("checked",!1),a(".osdownloads-modal .error").hide()}),d.off(),d.on("click",function(a){a.preventDefault(),p()&&s()})):s()}),c.data("configured",1)}):void 0}}(jQuery);