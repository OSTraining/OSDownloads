!function(e){e(function(){e(".reveal-modal").appendTo(e("body"))}),e.fn.osdownloads=function(a){var i={animation:"fade",elementsPrefix:"osdownloads",popupElementId:"osdownloadsRequirementsPopup"},a=e.extend({},i,a);return this.length?this.each(function(){var i=e(this),r=e("#"+a.elementsPrefix+"DownloadContinue"),n=e("#"+a.popupElementId),o=e("#"+a.elementsPrefix+"ErrorAgreeTerms"),t=e("#"+a.elementsPrefix+"ErrorInvalidEmail"),l=e("#"+a.elementsPrefix+"RequireAgree"),s=e("#"+a.elementsPrefix+"RequireEmail"),d=e("#"+a.elementsPrefix+"EmailGroup"),m=e("#"+a.elementsPrefix+"AgreeGroup"),f=e("#"+a.elementsPrefix+"RequiredEmailMessage"),c=(i.data("direct-page"),1==i.data("show-email")),u=1==i.data("require-email"),p=1==i.data("require-agree"),h=function(){var e=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,a=!1;if(p&&(l.is(":checked")?o.hide():(a=!0,o.show())),u){var i=s.val().trim();""!==i&&e.test(i)?t.hide():(a=!0,t.show())}else if(c){var i=s.val().trim();""==i||e.test(i)?t.hide():(a=!0,t.show())}return a?!1:!0},v=function(i){e(i).reveal({animation:a.animation,animationspeed:200,closeonbackgroundclick:!0,dismissmodalclass:"close-reveal-modal"})},P=function(){var r=i.attr("href");s.length>0&&(r+="&email="+s.val().trim()),$container=e("<div>").attr("id",a.elementsPrefix+"PopupIframe").addClass("reveal-modal"),$iframe=e("<iframe>").attr("src",r),$iframe.iframeAutoHeight({heightOffset:10}),$close=e('<a class="close-reveal-modal">&#215;</a>'),$iframe.appendTo($container),$close.appendTo($container),$container.appendTo(e("body")),$container.on("reveal:close",function(){setTimeout(function(){$container.remove()},500)}),n.trigger("reveal:close"),setTimeout(function(){v("#"+a.elementsPrefix+"PopupIframe")},500)};i.on("click",function(o){o.preventDefault(),c||u||p?(c||u?(u?f.show():f.hide(),d.show()):d.hide(),p?m.show():m.hide(),r.attr("href",i.attr("href")),v("#"+a.popupElementId),n.on("reveal:close",function(){s.val(""),l.attr("checked",!1),e(".reveal-modal .error").hide()}),r.off(),r.on("click",function(e){e.preventDefault(),h()&&P()})):P()})}):void 0}}(jQuery);
